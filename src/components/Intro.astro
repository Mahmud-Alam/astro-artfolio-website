<div
  class="relative mx-12 flex flex-col items-center justify-center xl:flex-row xl:gap-36"
>

  <div class="w-full xl:w-1/2">
    <h1 class="text-xl">
      Enter <span class="text-red-700 font-bold"><a href="https://mahmudalam.com/" target="_blank" rel="noopener noreferrer">Mahmud's</a></span> Doodle-Dazzled <span id="scribble" class="font-bold"
        >Digital Universe!</span
      >
    </h1><br><br>
    <div class="relative">
      <svg class="absolute h-full w-full overflow-visible">
        <defs>
          <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style={{ stopColor: "#DC3A2B", stopOpacity: 1 }}
            ></stop>
            <stop offset="100%" style={{ stopColor: "#E18510", stopOpacity: 1 }}
            ></stop>
          </linearGradient>
        </defs>
        <path
          id="border-path"
          fill="none"
          stroke="url(#gradient)"
          stroke-width="4"></path>
      </svg>
      <p id="anim-p" class="p-6 text-lg z-30 relative">
        You've stumbled upon <span class="text-red-700 font-bold"><a href="https://mahmudalam.com/" target="_blank" rel="noopener noreferrer">Mahmud's</a></span> little corner of the internet, where creativity runs rampant and normal
        is just a setting on a washing machine.<br />
        <br />
        Stick around, explore the digital masterpieces, and enjoy the occasional
        artistic shenanigans. It's more fun than you'd think!
        <br />
        <br />
        Delight in the unpredictable artistic shenanigans that burst forth from the
        canvas of this digital universe. Here, every visit is an adventure, every
        glance an exploration. Dive in, the pixels are warm!
      </p>
    </div>
    <div class="flex justify-center pt-12 mb-12 text-center xl:gap-16">
      <div class="w-32">
        <h2>Art Posts</h2>
        <p id="art-counter" class="text-xl font-bold"></p>
      </div>
      <div class="w-32">
        <h2>Visitors</h2>
        <p id="visitor-counter" class="text-xl font-bold"></p>
      </div>
      <div class="w-32">
        <h2>Reviews</h2>
        <p id="review-counter" class="text-xl font-bold"></p>
      </div>
    </div>
  </div>

  <div class="relative">
    <img class="h-full" src="/main-portrait.jpg" alt="Portrait Art" />
    <div class="absolute bottom-0 right-0 translate-y-1/4">
      <img src="/paint.png" alt="Paint" />
    </div>
  </div>
</div>

<div class="mt-12 h-4 w-full bg-black"></div>

<style>
  #border-path {
    animation: draw 1s forwards 0.5s ease-out;
  }
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
</style>

<script>
  function updatedPath() {
    const textMain = document.querySelector("#anim-p") as HTMLElement;
    const path = document.querySelector("#border-path") as SVGPathElement;

    if (textMain && path) {
      path.setAttribute(
        "d",
        `M0,0 V${textMain.offsetHeight} H${textMain.offsetWidth} v${textMain.offsetHeight / 2}`
      );
    }
    const pathLength = path.getTotalLength();
    path.style.strokeDasharray = pathLength.toString();
    path.style.strokeDashoffset = pathLength.toString();
  }

  function incrementCounter(
    selector: string,
    current: number,
    target: number,
    duration: number,
    letter: string = ""
  ) {
    let counter = document.getElementById(selector);
    let stepTime = Math.abs(Math.floor(duration / target));
    if (current < target && counter) {
      current++;
      counter.innerText = current.toString() + letter;
      setTimeout(
        () => incrementCounter(selector, current, target, duration, letter),
        stepTime
      );
    }
  }

  //   Increment function
  incrementCounter("art-counter", 0, 85, 2000);
  incrementCounter("visitor-counter", 0, 347, 2000, "k");
  incrementCounter("review-counter", 0, 292, 2000);

  window.addEventListener("DOMContentLoaded", updatedPath);
  window.addEventListener("resize", updatedPath);
</script>
